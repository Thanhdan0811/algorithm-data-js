- Các định nghĩa chính trong Nextjs (App Router)
1. Routing and navigation  <LINK />
2. Metadata
3. Styling (Tailwind CSS)
4. <Image />
5. Client and Server Components - Data fetching (Get-requests)
6. Server actions (POST/PUT/DELETE)
7. Suspense and streaming
8. Caching
9. Static & Dynamic rendering
10. Middleware
11. Folder Structure
12. Production build adn deploying.


# Tạo project 
- npx create-next-app@latest .(name-project)

# 1. Routing and navigation
- mặc định file __page.tsx__ sẽ là file chạy khi vào 1 folder. 
- Để tạo thêm trang ta, trong folder app ta tạo các folder có tên sẽ là tên đường dẫn đến trang mới.
- app => posts folder => localhost:8080/posts
- Để tạo các trang chi tiết có id, ta đặt tên folder là : [id]
- app => posts folder => [id] ==> localhost:8080/posts/12381273

## LAYOUT 
- file __layout.tsx__ ở folder app, để tạo layout cho trang, ko phải reload lại.
```
export defalut function RootLayout({children} : {children: React.ReactNode;})  {
    return (
        <html lang="en">
            <body>
                <Container>
                    <Header />
                    {children}
                    <Footer />
                </Container>
            </body>
        </html>
    )
}

```

- để navigating ta dùng : <LINK href={}></LINK>

# 2.Metadata
```
export const metadata: Metadata = {
    title: "Create Next App",
    description: "Generated by create next app",

}

```

- ở các trang ta sẽ export metadata, để dùng cho google seo.


# 3. Styling mặc định tailwind sẽ đc cài cho next.

# 4. <Image> component
- Next có 1 componnet là <Image> để dùng load ảnh.
- COmponent tụ chuyển sang dạn .webp để nhẹ hơn.
- Còn có thể giúp image responsive.
- Cho phép dùng image ở url khác, từ hostname khác.
```
<Image
    src="https://placehold.jp/0000/fffff/"
    alt="logo"
    className="h-[35px] w-[35px]"
    width="50"
    height="50"
 />

file next.config.js

const nextConfig = {
    images: {
        remotePatterns: {
            protocol: "https",
            hostname: "placehold.js"
        }
    }
}
module.exports = nextConfig;


```

# 5. Client and Server components.
- Mọi components trong folder app được xem là server component.
- Nếu có package nào lớn thì sẽ chỉ lưu ở server, ko cần client phải tải lại. server sẽ chỉ trả về kết quả cho client.
- có thể dùng fetch data mà ko cần dùng useEffect.

- keyword : "use client"
- khi dùng ketword này ở đầu file thì sẽ hiểu là sẽ đc render ở client. các packages sẽ được client tải và render.

# 6. Server actions. (POST/PUT/DELETE)
```
const addPost = async (formData: FormData) => {
    "use server";

    await prisma.post.create({
        data: {
            title: formData.get("title") as string,
            body: formData.get("body") as string
        }
    })

    // load lại trang
    revalidatePath("/posts")
}

return (

    <form
        action={addPost}
    >
)

```

- keyword : "use server"
- Từ khóa trên cho biết function sẽ chỉ chạy ở server.


# 7. Suspense and streaming
- chủ yếu là hiển thị loading khi trang thay đổi.
- file __loading.tsx__ ở folder app
- file này sẽ làm tất cả bị che đi bởi compnent loading.
- Nếu ta chỉ mún chờ loading 1 component nào đó, thì dùng : <Suspense></Suspense>
```
<Suspense fallback={<Loading />} >
    <PostList />
</Suspense>

```

- sau khi PostList đc load thành công, loading sẽ tắt.

# 8. Caching and 9. Static Dynamic rendering
- caching chỉ trong 5ph, hoặc lm mới khi bị load lại.
- êp dynamic : export const dynamic = "force-dynamic";
- dev thì là dynamic, production thì là static conent.
```
fetch(url, {cache: "no-cache"})

```

- sẽ ko bị static content nữa.

```
fetch(url, {next: {revalidate: 3600}})

```
- sau 1h sẽ tự động load lại.

- TÓm lại có 2 loại cache : Route cach và data cach.

# 10. Middleware
- tạo file : middleware.ts

# Folder structure.

